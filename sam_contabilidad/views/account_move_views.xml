<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <!--
        Definición de una acción de servidor en Odoo v18.
        Esta acción permite ejecutar el método `action_download_xml`
        en el modelo `account.move` cuando se activa desde la interfaz.
    -->

    <record id="action_download_xml" model="ir.actions.server">
        <!-- Nombre de la acción que aparecerá en la interfaz de Odoo -->
        <field name="name">Descargar XML y PDF</field>

        <!-- Modelo sobre el que se ejecutará la acción -->
        <field name="model_id" ref="account.model_account_move"/>

        <!-- Tipo de acción: "code" indica que ejecutará código Python -->
        <field name="state">code</field>

        <!-- Binding: Hace que la acción aparezca en el menú "Acción" de las facturas -->
        <field name="binding_model_id" ref="account.model_account_move"/>
        <field name="binding_view_types">list,form</field>

        <!-- Código Python que se ejecutará cuando se active la acción -->
        <field name="code">
if records:
    action = records.action_download_xml()
        </field>
    </record>
</odoo>

