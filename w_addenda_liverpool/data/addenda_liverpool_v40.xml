<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <!-- Liverpool Addenda for CFDI 4.0 -->
        <record id="addenda_liverpool" model="l10n_mx_edi.addenda">
            <field name="name">Liverpool</field>
            <field name="arch" type="xml">
                <t>
                    <detallista:detallista xmlns:detallista="http://www.sat.gob.mx/detallista" contentVersion="1.3.1" documentStructureVersion="AMC8.1" type="SimpleInvoiceType" documentStatus="ORIGINAL">
                    <detallista:requestForPaymentIdentification>
                        <t t-if="record.move_type in ('out_invoice', 'in_invoice')">
                            <detallista:entityType>INVOICE</detallista:entityType>
                        </t>
                        <t t-elif="record.move_type in ('out_refund', 'in_refund')">
                            <detallista:entityType>CREDIT_NOTE</detallista:entityType>
                        </t>
                    </detallista:requestForPaymentIdentification>
                    <detallista:specialInstruction code="ZZZ">
                        <detallista:text><t t-out="record.unescape_characters(record._l10n_mx_edi_cfdi_amount_to_text())"/></detallista:text>
                    </detallista:specialInstruction>
                    <detallista:orderIdentification>
                        <detallista:referenceIdentification type="ON"><t t-out="record.purchase_order_liv or 'N/A'"/></detallista:referenceIdentification>
                    </detallista:orderIdentification>
                    <detallista:AdditionalInformation>
                        <detallista:referenceIdentification type="IV"><t t-out="record.unescape_characters(record.name)"/></detallista:referenceIdentification>
                    </detallista:AdditionalInformation>
                    <detallista:DeliveryNote>
                        <detallista:referenceIdentification><t t-out="record.delivery_folio or 'N/A'"/></detallista:referenceIdentification>
                        <detallista:ReferenceDate><t t-out="record.date_delivery or record.invoice_date"/></detallista:ReferenceDate>
                    </detallista:DeliveryNote>
                    <detallista:buyer>
                        <detallista:gln><t t-out="record.partner_id.global_localitation_number or '0000000000000'"/></detallista:gln>
                        <t t-if="record.partner_id.person_order_department">
                            <detallista:contactInformation>
                                <detallista:personOrDepartmentName>
                                    <detallista:text><t t-out="record.unescape_characters(record.partner_id.person_order_department)"/></detallista:text>
                                </detallista:personOrDepartmentName>
                            </detallista:contactInformation>
                        </t>
                    </detallista:buyer>
                    <detallista:seller>
                        <detallista:gln><t t-out="record.company_id.global_localitation_number or '0000000000000'"/></detallista:gln>
                        <detallista:alternatePartyIdentification type="SELLER_ASSIGNED_IDENTIFIER_FOR_A_PARTY"><t t-out="record.partner_id.supplier_identification or record.company_id.vat or 'N/A'"/></detallista:alternatePartyIdentification>
                    </detallista:seller>
                    <t t-raw="record._l10n_mx_edi_addenda_liverpool()"/>
                    <detallista:totalAmount>
                        <detallista:Amount><t t-out="record.get_total_amount()"/></detallista:Amount>
                    </detallista:totalAmount>
                    <detallista:TotalAllowanceCharge allowanceOrChargeType="ALLOWANCE">
                        <detallista:Amount>0.00</detallista:Amount>
                    </detallista:TotalAllowanceCharge>
                </detallista:detallista>
                </t>
            </field>
        </record>
    </data>
</odoo>

